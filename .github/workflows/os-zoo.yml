# Copyright 2021-2025 The OpenSSL Project Authors. All Rights Reserved.
#
# Licensed under the Apache License 2.0 (the "License").  You may not use
# this file except in compliance with the License.  You can obtain a copy
# in the file LICENSE in the source distribution or at
# https://www.openssl.org/source/license.html

name: OS Zoo CI

on: [pull_request, push]

permissions:
  contents: read

jobs:
  linux-s390x:
    runs-on: linux-s390x
    if: github.repository == 'openssl/openssl'
    steps:
    - uses: actions/checkout@v6
      with:
        persist-credentials: false
    - name: config
      run: ./config --strict-warnings enable-fips enable-md2 enable-rc5 enable-trace
    - name: config dump
      run: ./configdata.pm --dump
    - name: make
      run: make -j4
    - name: get cpu info
      run: |
        cat /proc/cpuinfo
        ./util/opensslwrap.sh version -c
    - name: make test
      run: make test HARNESS_JOBS=${HARNESS_JOBS:-4} LHASH_WORKERS=${LHASH_WORKERS:-16}
